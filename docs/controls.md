# コントロール

誰もが、アプリケーションの各パートごとのスコープと必要な機能を事前に定めておきたいと考えていることでしょう。しかし現実には、予想していた以上に規模が大きくなってしまったりして、思った通りに上手くいかないこともありがちです。コントロールを利用すると、再利用可能なコードやビューを簡単にセットアップすることが可能です。コントロールが大きくなってきたら、コントロールの呼び出しには変更を加えることなく、コントロールの場所を移すことができます。

コントロールをレンダリングするには、以下のようにタグを使用します:

```html
    <:control-name />
```

or

```html
    <:control-name></:control-name>
```

Volt は、コントロールのビューと追加のコントローラーを見つけるために、以下の順序で探索します:

| セクション | ビューのファイル | ビューのフォルダー | コンポーネント |
|------------|------------------|--------------------|----------------|
| :{名前}    |                  |                    |                |
| :body      | {名前}.html      |                    |                |
| :body      | index.html       | {名前}             |                |
| :body      | index.html       | index              | {名前}         |
| :body      | index.html       | index              | gems/{名前}    |

**もし名前とフォルダーが一致した場合には、ビューのフォルダーにあるすべてがコントローラーを読み込むことに注意してください*。*


上記の各パートについて説明します:

1. セクション
ビューはセクションから構成されます。セクションは ```<:セクション名>``` で始まり、閉じタグはありません。Volt はまず同じビュー内のセクションを探します。

2. ビュー
次に、Volt はコントロールの名前を持ったビューのファイルを探します。もしそこで見つかれば、ビューの body セクションにレンダリングします。

3. ビューのフォルダー
上記で見つからなければ、Volt はビューのフォルダーの中で、コントローラーの名前のファイル、もしくは index.html を探します。そして、:body セクションにレンダリングされます。もしコントローラーがビューのフォルダーに存在した場合には、そのコントローラーのインスタンスが新しく生成され、そのインスタンスでレンダリングが行われます。

4. コンポーネント
次に、app/ 以下のすべてのフォルダーをチェックします。対象となるビューのパスは {component}/index/index.html で、:body セクションを持っているものになります。

5. gem
最後に、「volt」で始まるすべての gem の app フォルダをチェックします。コンポーネントに対しても上記と同様にチェックされます。

また、コントロールを作成するときに、その名前に複数の探索パスを指定することもできます。各パートは : で区切る必要があります。例えば:

```html
    <:blog:comments />
```

上記の例の場合は以下のように探索します:

| セクション   | ビューのファイル | ビューのフォルダー | コンポーネント |
|--------------|------------------|--------------------|----------------|
| :comments    | blog.html        |                    |                |
| :body        | comments.html    | blog               |                |
| :body        | index.html       | comments           | blog           |
| :body        | index.html       | comments           | gems/blog      |

コントロールやテンプレートのためのビューのファイルが見つかれば、それにマッチするコントローラーを探します。もしコントロールがローカルのテンプレートとして指定されていれば、空の ModelController を使います。もしコントローラーが見つかって読み込まれると、それに対応する「アクション (action)」メソッドが (存在すれば) コントローラー上で実行されます。デフォルトのアクションメソッドは「index」となります。ただし、コンポーネントかテンプレートのパスが2つのパートを持っている場合には、その最後のパートがアクションとなります。
